(()=>{"use strict";var e,t={650:(e,t,s)=>{class i{constructor(e){this.type=e}}var o;!function(e){e.DRAG_START="THREE_CANVAS_EVENT_DRAG_START",e.DRAG="THREE_CANVAS_EVENT_DRAG",e.DRAG_END="THREE_CANVAS_EVENT_DRAG_END",e.MOVE="THREE_CANVAS_EVENT_MOVE",e.ZOOM="THREE_CANVAS_EVENT_ZOOM"}(o||(o={}));var n,r=s(27),h=s(709);class a extends h.pBf{constructor(e,t){var s,n;super(),this.isDrag=!1,this.hasThrottled=!1,this.throttlingTime_ms=16,this.throttlingDelta=0,this.onTick=e=>{this.throttlingDelta+=e.delta,this.throttlingDelta<this.throttlingTime_ms||(this.hasThrottled=!1,this.throttlingDelta%=this.throttlingTime_ms)},this.onDocumentMouseDown=e=>{this.isDrag||this.isContain(e)&&(this.isDrag=!0,this.updatePosition(e),this.dispatchDragEvent(o.DRAG_START,e))},this.onDocumentMouseMove=e=>{this.hasThrottled||(this.hasThrottled=!0,this.dispatchDragEvent(o.MOVE,e),this.isDrag&&(this.dispatchDragEvent(o.DRAG,e),this.updatePosition(e)))},this.onDocumentMouseLeave=e=>{this.onDocumentMouseUp(e)},this.onDocumentMouseUp=e=>{this.isDrag&&(this.isDrag=!1,this.dispatchDragEvent(o.DRAG_END,e))},this.onMouseWheel=e=>{const t=new i(o.ZOOM);null!=e.detail&&(t.deltaScroll=e.detail<0?1:-1),null!=e.wheelDelta&&(t.deltaScroll=e.wheelDelta>0?1:-1),null!=e.deltaY&&(t.deltaScroll=e.deltaY>0?1:-1),this.dispatchEvent(t)},null!==(s=this.throttlingTime_ms)&&void 0!==s||(this.throttlingTime_ms=null==t?void 0:t.throttlingTime_ms),null!==(n=this.viewport)&&void 0!==n||(this.viewport=null==t?void 0:t.viewport),this.canvas=e,this.canvas.addEventListener("mousemove",this.onDocumentMouseMove,!1),this.canvas.addEventListener("mousedown",this.onDocumentMouseDown,!1),this.canvas.addEventListener("mouseup",this.onDocumentMouseUp,!1),this.canvas.addEventListener("mouseleave",this.onDocumentMouseLeave,!1),this.canvas.addEventListener("wheel",this.onMouseWheel,!1),r.Fz.on(r.M9.tick,this.onTick)}updatePosition(e){this.positionX=e.offsetX,this.positionY=e.offsetY}dispatchDragEvent(e,t){const s=new i(e),{x:n,y:r}=this.convertToLocalMousePoint(t);s.positionX=n,s.positionY=r,e===o.DRAG&&(s.deltaX=t.offsetX-this.positionX,s.deltaY=t.offsetY-this.positionY),this.dispatchEvent(s)}convertToLocalMousePoint(e){if(this.viewport){const t=a.convertToRect(this.canvas,this.viewport);return{x:e.offsetX-t.x1,y:e.offsetY-t.y1}}return{x:e.offsetX,y:e.offsetY}}isContain(e){if(!this.viewport)return!0;const t=a.convertToRect(this.canvas,this.viewport);return e.offsetX>=t.x1&&e.offsetX<=t.x2&&e.offsetY>=t.y1&&e.offsetY<=t.y2}static convertToRect(e,t){let s=0;return s=null!=e.style.width&&e.style.height?parseInt(e.style.height):e.height/window.devicePixelRatio,{x1:t.x,x2:t.x+t.width,y1:s-(t.y+t.height),y2:s-t.y}}dispose(){this.canvas.removeEventListener("mousemove",this.onDocumentMouseMove,!1),this.canvas.removeEventListener("mousedown",this.onDocumentMouseDown,!1),this.canvas.removeEventListener("mouseup",this.onDocumentMouseUp,!1),this.canvas.removeEventListener("mouseleave",this.onDocumentMouseLeave,!1),r.Fz.off(r.M9.tick,this.onTick)}}!function(e){e.SLEEP="SLEEP_EVENT_TYPE_SLEEP",e.WAKEUP="SLEEP_EVENT_TYPE_WAKEUP"}(n||(n={}));class l{constructor(e){this.type=e}}class c extends h.pBf{constructor(e,t){super(),this.timeOut_ms=1e4,this.isSleep=!1,this.resetTimer=(e=null)=>{this.stopTimer(),this.wakeup(),this.sleepTimerID=setTimeout(this.sleep,this.timeOut_ms)},this.sleep=()=>{this.isSleep||(this.dispatchEvent(new l(n.SLEEP)),this.isSleep=!0)},this.wakeup=()=>{this.isSleep&&(this.dispatchEvent(new l(n.WAKEUP)),this.isSleep=!1)},this.pauseTimer=()=>{this.stopTimer(),this.wakeup();const e=this.dragWatcher;e.removeEventListener(o.DRAG_START,this.pauseTimer),e.addEventListener(o.DRAG_END,this.resumeTimer)},this.resumeTimer=()=>{this.resetTimer();const e=this.dragWatcher;e.addEventListener(o.DRAG_START,this.pauseTimer),e.removeEventListener(o.DRAG_END,this.resumeTimer)},t||(t={}),null!=t.timeOut_ms&&(this.timeOut_ms=t.timeOut_ms),this.dragWatcher=e}stopTimer(){null!=this.sleepTimerID&&(clearTimeout(this.sleepTimerID),this.sleepTimerID=null)}start(){this.stopMouseEventListeners(),this.startMouseEventListeners(),this.resetTimer()}startMouseEventListeners(){const e=this.dragWatcher;e.addEventListener(o.ZOOM,this.resetTimer),e.addEventListener(o.DRAG_START,this.pauseTimer)}stop(){this.stopTimer(),this.wakeup(),this.stopMouseEventListeners()}stopMouseEventListeners(){const e=this.dragWatcher;e.removeEventListener(o.ZOOM,this.resetTimer),e.removeEventListener(o.DRAG_START,this.pauseTimer),e.removeEventListener(o.DRAG_END,this.resumeTimer)}}window.onload=()=>{const e=new h.xsS,t=new h.cPb(45,2,1,1e4);t.position.set(0,0,1e3),e.add(t);const s={canvas:document.getElementById("webgl-canvas")},i=new h.CP7(s);i.setClearColor(new h.Ilk(0)),i.setSize(1280,640),i.setPixelRatio(window.devicePixelRatio);const r=new h.Mig(16777215,1);e.add(r),i.render(e,t);const l=new a(i.domElement);l.addEventListener(o.DRAG,(e=>{console.log(`throttlingTime_ms : ${l.throttlingTime_ms}`,`TimeStamp : ${performance.now()}`,e)})),l.addEventListener(o.DRAG_START,(e=>{console.log(e)})),l.addEventListener(o.DRAG_END,(e=>{console.log(e)})),l.addEventListener(o.ZOOM,(e=>{console.log(e)}));const u=new c(l,{timeOut_ms:2e3});u.addEventListener(n.SLEEP,(e=>{console.log(e)})),u.addEventListener(n.WAKEUP,(e=>{console.log(e)})),u.start()}}},s={};function i(e){var o=s[e];if(void 0!==o)return o.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,i),n.exports}i.m=t,e=[],i.O=(t,s,o,n)=>{if(!s){var r=1/0;for(c=0;c<e.length;c++){for(var[s,o,n]=e[c],h=!0,a=0;a<s.length;a++)(!1&n||r>=n)&&Object.keys(i.O).every((e=>i.O[e](s[a])))?s.splice(a--,1):(h=!1,n<r&&(r=n));if(h){e.splice(c--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,o,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={451:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var o,n,[r,h,a]=s,l=0;if(r.some((t=>0!==e[t]))){for(o in h)i.o(h,o)&&(i.m[o]=h[o]);if(a)var c=a(i)}for(t&&t(s);l<r.length;l++)n=r[l],i.o(e,n)&&e[n]&&e[n][0](),e[r[l]]=0;return i.O(c)},s=self.webpackChunkthreejs_drag_watcher=self.webpackChunkthreejs_drag_watcher||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var o=i.O(void 0,[736],(()=>i(650)));o=i.O(o)})();