(()=>{"use strict";var t,e={232:(t,e,s)=>{var o,i,n=s(75);class r{constructor(t){this.type=t}}(i=o||(o={})).DRAG_START="THREE_CANVAS_EVENT_DRAG_START",i.DRAG="THREE_CANVAS_EVENT_DRAG",i.DRAG_END="THREE_CANVAS_EVENT_DRAG_END",i.MOVE="THREE_CANVAS_EVENT_MOVE",i.ZOOM="THREE_CANVAS_EVENT_ZOOM";var a,h,l=s(163);class c extends n.pBf{constructor(t,e){var s,i;super(),this.isDrag=!1,this.hasThrottled=!1,this.throttlingTime_ms=16,this.throttlingDelta=0,this.onTick=t=>{this.throttlingDelta+=t.delta,this.throttlingDelta<this.throttlingTime_ms||(this.hasThrottled=!1,this.throttlingDelta%=this.throttlingTime_ms)},this.onDocumentMouseDown=t=>{this.isDrag||this.isContain(t)&&(this.isDrag=!0,this.updatePosition(t),this.dispatchDragEvent(o.DRAG_START,t))},this.onDocumentMouseMove=t=>{this.hasThrottled||(this.hasThrottled=!0,this.dispatchDragEvent(o.MOVE,t),this.isDrag&&(this.dispatchDragEvent(o.DRAG,t),this.updatePosition(t)))},this.onDocumentMouseLeave=t=>{this.onDocumentMouseUp(t)},this.onDocumentMouseUp=t=>{this.isDrag&&(this.isDrag=!1,this.dispatchDragEvent(o.DRAG_END,t))},this.onMouseWheel=t=>{const e=new r(o.ZOOM);null!=t.detail&&(e.deltaScroll=t.detail<0?1:-1),null!=t.wheelDelta&&(e.deltaScroll=t.wheelDelta>0?1:-1),null!=t.deltaY&&(e.deltaScroll=t.deltaY>0?1:-1),this.dispatchEvent(e)},null!==(s=this.throttlingTime_ms)&&void 0!==s||(this.throttlingTime_ms=null==e?void 0:e.throttlingTime_ms),null!==(i=this.viewport)&&void 0!==i||(this.viewport=null==e?void 0:e.viewport),this.canvas=t,this.canvas.addEventListener("mousemove",this.onDocumentMouseMove,!1),this.canvas.addEventListener("mousedown",this.onDocumentMouseDown,!1),this.canvas.addEventListener("mouseup",this.onDocumentMouseUp,!1),this.canvas.addEventListener("mouseleave",this.onDocumentMouseLeave,!1),this.canvas.addEventListener("wheel",this.onMouseWheel,!1),l.Fz.on(l.M9.tick,this.onTick)}updatePosition(t){this.positionX=t.offsetX,this.positionY=t.offsetY}dispatchDragEvent(t,e){const s=new r(t),{x:i,y:n}=this.convertToLocalMousePoint(e);s.positionX=i,s.positionY=n,t===o.DRAG&&(s.deltaX=e.offsetX-this.positionX,s.deltaY=e.offsetY-this.positionY),this.dispatchEvent(s)}convertToLocalMousePoint(t){if(this.viewport){const e=c.convertToRect(this.canvas,this.viewport);return{x:t.offsetX-e.x1,y:t.offsetY-e.y1}}return{x:t.offsetX,y:t.offsetY}}isContain(t){if(!this.viewport)return!0;const e=c.convertToRect(this.canvas,this.viewport);return t.offsetX>=e.x1&&t.offsetX<=e.x2&&t.offsetY>=e.y1&&t.offsetY<=e.y2}static convertToRect(t,e){let s=0;return s=null!=t.style.width&&t.style.height?parseInt(t.style.height):t.height/window.devicePixelRatio,{x1:e.x,x2:e.x+e.width,y1:s-(e.y+e.height),y2:s-e.y}}dispose(){this.canvas.removeEventListener("mousemove",this.onDocumentMouseMove,!1),this.canvas.removeEventListener("mousedown",this.onDocumentMouseDown,!1),this.canvas.removeEventListener("mouseup",this.onDocumentMouseUp,!1),this.canvas.removeEventListener("mouseleave",this.onDocumentMouseLeave,!1),l.Fz.off(l.M9.tick,this.onTick)}}(h=a||(a={})).SLEEP="SLEEP_EVENT_TYPE_SLEEP",h.WAKEUP="SLEEP_EVENT_TYPE_WAKEUP",window.onload=()=>{const t={canvas:document.getElementById("webgl-canvas")},e=new n.CP7(t);e.autoClear=!1,e.setSize(1280,640),e.setPixelRatio(window.devicePixelRatio);const s=new n.Kj0(new n.FE5(10,3,100,16),new n.xoR({color:16711680,specular:16777215,shininess:30})),o=new n.Kj0(new n.FE5(10,3,100,16),new n.xoR({color:255,specular:16777215,shininess:30})),i=new d(e,20,20,400,300,s,2236962),r=new d(e,480,360,120,60,o,4473924),a=()=>{e.setClearColor(0),e.clear(),i.render(e),r.render(e),requestAnimationFrame(a)};a()};class d{scene;camera;bgColor;viewPort;mesh;dragManager;constructor(t,e,s,i,r,a,h){this.viewPort=new n.Ltg(e,s,i,r),this.mesh=a,this.scene=new n.xsS,this.camera=new n.cPb(45,i/r,1,1e4),this.camera.position.set(0,0,64),this.scene.add(this.camera),this.scene.add(a),this.bgColor=h;const l=new n.Mig(1118481,1);this.scene.add(l);const d=new n.PMe(8947848,1);d.position.set(8,6,-2),this.scene.add(d);const v=new n.PMe(8947848,1);v.position.set(-8,-6,2),this.scene.add(v),this.dragManager=new c(t.domElement,{viewport:this.viewPort}),this.dragManager.addEventListener(o.DRAG,(t=>{console.log(this.bgColor,`throttlingTime_ms : ${this.dragManager.throttlingTime_ms}`,`TimeStamp : ${performance.now()}`,t)})),this.dragManager.addEventListener(o.DRAG_START,(t=>{console.log(t)})),this.dragManager.addEventListener(o.DRAG_END,(t=>{console.log(t)})),this.dragManager.addEventListener(o.ZOOM,(t=>{console.log(t)}))}render(t){this.mesh.rotation.x+=.001,this.mesh.rotation.y+=.001,t.setClearColor(this.bgColor),t.clearDepth(),t.setScissorTest(!0),t.setScissor(this.viewPort),t.setViewport(this.viewPort),t.clear(),t.render(this.scene,this.camera),t.setScissorTest(!1)}}}},s={};function o(t){var i=s[t];if(void 0!==i)return i.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,o),n.exports}o.m=e,t=[],o.O=(e,s,i,n)=>{if(!s){var r=1/0;for(c=0;c<t.length;c++){for(var[s,i,n]=t[c],a=!0,h=0;h<s.length;h++)(!1&n||r>=n)&&Object.keys(o.O).every((t=>o.O[t](s[h])))?s.splice(h--,1):(a=!1,n<r&&(r=n));if(a){t.splice(c--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,i,n]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.j=212,(()=>{var t={212:0};o.O.j=e=>0===t[e];var e=(e,s)=>{var i,n,[r,a,h]=s,l=0;if(r.some((e=>0!==t[e]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(h)var c=h(o)}for(e&&e(s);l<r.length;l++)n=r[l],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(c)},s=self.webpackChunk_masatomakino_threejs_drag_watcher=self.webpackChunk_masatomakino_threejs_drag_watcher||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=o.O(void 0,[736],(()=>o(232)));i=o.O(i)})();